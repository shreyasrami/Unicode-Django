{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graphs</title>
    <link rel="icon" href="{% static 'images/logo.png' %}" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

    <link rel="stylesheet" href="{% static 'css/home4.css' %}">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <script src="https://kit.fontawesome.com/e41a6e67ca.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.1.0/dist/chart.min.js"></script>
  
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script> -->

  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
    crossorigin="anonymous"></script>
    
    <style>
      body{
          overflow-x: hidden;
        }
        .fa-plus-circle{
          color:#04fe9e;
          background-color: white;
          border-radius: 100%;
          border: 5px solid white;
        }
        
        /* --------------------------------NAVBAR-START-------------------------- */
        .navbar{
          /* background-color: #04fe9e; */
        
        }
        .health{
            /* font-family: "Poppins", sans-serif; */
            font-weight: bold;
            font-size: 20px;
            /* "Helvetica Neue", Helvetica, Arial, sans-serif */
        }
        nav {
          /* background-image: linear-gradient(-45deg,  #04fe9e 0%, #c7eb44 100%); */
        
        }
        .nav-item {
          margin-left: 10%;
          text-align: center;
          font-weight: bold;
        
        }
        .navitems {
          margin-right: 5%;
        
        }
        
        .collapsediv {
          padding-right: 10%;
        }
        .meet {
          margin-top: 8px;
          text-align: center;
        }
        .meet:hover {
          background-color: #c7eb44;
          transition: 0.5s;
          /* border-radius: 999px; */
          /* width: 150%; */
        
          text-align: center;
        }
        .fa-accusoft {
          color: #ab0061;
        }
        .colorbtns:hover{
          background-color:inherit;
        }
        /* --------------------------------NAVBAR-END-------------------------- */
        
        
        .containergreen{
          height: 200px;
          border-radius: 0 0 100% 100%;
          width: 100%;
          background-image: linear-gradient(-45deg,  #04fe9e 0%, #c7eb44 100%);
        }
        
        .blogs{
          color: white;
          text-align: center;
          padding-top: 70px;
          padding-left: 5%;
          padding-right: 5%;
          padding-bottom: 5%;
        
        }
        
        .btn{
          border-radius: 999px;
        }
        .btn:hover{
          background-color: #04fe9e;
        }
        .fa-plus-circle{
          color:#04fe9e;
          background-color: white;
          border-radius: 100%;
          border: 5px solid white;
        }
        
        @media only screen and (max-width:767px){
          
          .wrapper{
            position: relative;
            width:80vw;
            height:80vh;
          }
      
      }
      @media only screen and (min-width:768px){
      
          .wrapper{
            position: relative;
            width:60vw;
            height:80vh;
          }
          
      }
      @media only screen and (min-width:992px){
      
        .wrapper{
          position: relative;
          width:40vw;
          height:80vh;
        }
        
    }
    .navbar-toggler:focus,
    .navbar-toggler:active,
    .navbar-toggler-icon:focus{
      outline: none;
      box-shadow:none;
    }
        
  </style>
  
</head>
<body>
  <!-- ===============================NAVBAR-START======================================= -->
<nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: #04fe9e;">
  <div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse collapsediv navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0 navitems">
        <li class="nav-item">
          <a class="nav-link meet" aria-current="page" href="{% url 'weather' %}">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link meet" href="{% url 'country_query' %}">Country</a>
        </li>
        <li class="nav-item">
          <a class="nav-link meet" href="{% url 'top3_query' %}">Top3</a>
        </li>
        <li class="nav-item">
          <a class="nav-link meet active" href="{% url 'graphs' %}">Graphs</a>
        </li>


      </ul>

    </div>
  </div>
</nav>


<!-- ===============================NAVBAR-END======================================= -->


  <div class="containergreen">
    <h1 class="blogs">Graphs</h1>
  </div><br><br>
  <h3 style="text-align: center;">All Cities</h3><br><br>
  <script>
    $(document).ready(function(){
      var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [{% for obj in all %}'{{ obj.city }}',{% endfor %}],
            datasets: [{
                label: 'Number of Searches',
                data: [{% for obj in all %}'{{ obj.count }}',{% endfor %}],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
      
    })
    
    </script>
  <div class="container"><canvas id="myChart" width="3" height="1"></canvas></div>
  <br><br><br><br><br>
  

  <h3 style="text-align: center;">Based on Countries</h3><br><br>

  {% for country in countries %}
  
  <script>
    $(document).ready(function(){
      var ctx = document.getElementById('countries_{{forloop.counter}}').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [{% for city in country.country %}'{{ city.city }}',{% endfor %}],
            datasets: [{
                label: '{{ country.country.first.country }}',
                data: [{% for city in country.country %}'{{ city.count }}',{% endfor %}],
                backgroundColor: [
                    
                    'rgba(54, 162, 235, 0.2)',
                     
                 
                ],
                borderColor: [
                    'blue',
            
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
      
    })
    
    </script>
  <div class="container"><canvas id="countries_{{forloop.counter}}" width="3" height="1"></canvas></div>
  <br><br><br><br><br>
  {% endfor %}
  <br>
  <h3 style="text-align: center;">Top 3 Most Searched Cities</h3><br><br>
  <script>
    $(document).ready(function(){
      var ctx = document.getElementById('pchart').getContext('2d');
      var myChart = new Chart(ctx, {
          type: 'pie',
          data: {
              labels: [{% for city in cities %}'{{ city.city }}',{% endfor %}],
              datasets: [{
                  label: 'Most Searched Cities',
                  data: [{% for city in cities %}'{{ city.count }}',{% endfor %}],
                  backgroundColor: [
                      'rgba(54, 162, 235, 0.2)',
                      'rgba(80, 10, 86, 0.2)',
                      'rgba(153, 102, 255, 0.2)',
                      
                  ],
                  borderColor: [
                      'rgba(54, 162, 235, 1)',
                      'rgba(80, 10, 86, 1)',
                      'rgba(153, 102, 255, 1)',
                  ],
                  borderWidth: 1
              }]
          },
          options: {
              scales: {
                  y: {
                      beginAtZero: false
                  }
              }
          }
      });
        
    })
    
  </script>
  <div class="wrapper container"><canvas id="pchart"></canvas></div>
  <br><br><br>

  
</body>
</html>